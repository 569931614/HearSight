# 🎉 HearSight 启动成功！

## ✅ 服务状态

### 后端服务
- **状态**: ✅ 运行中
- **地址**: http://localhost:9999
- **API 文档**: http://localhost:9999/docs
- **数据库**: 已连接 (117.72.164.82:5433/hearsight)

### 前端服务
- **状态**: ✅ 运行中
- **地址**: http://localhost:5173
- **界面**: React + Ant Design

### 向量库
- **状态**: ✅ 已配置
- **类型**: ChromaDB
- **位置**: `HearSight/vector_db/`

## 🌐 访问地址

**打开浏览器访问**: http://localhost:5173

## 📋 功能清单

### ✅ 已实现功能

1. **视频导入**
   - 支持 Bilibili 链接导入
   - 自动下载视频

2. **语音转文字**
   - 基于 FunASR
   - 精确时间戳

3. **AI 摘要生成**
   - 段落级摘要
   - 视频级总结

4. **AI 对话分析** ⭐ 新功能
   - 基于整个摘要库的智能对话
   - 语义搜索所有视频
   - 引用相关视频片段
   - 点击引用跳转到视频时间点

5. **视频播放**
   - 同步字幕显示
   - 点击分句跳转

## 🎮 使用指南

### 1. 导入视频

在顶部输入框粘贴 Bilibili 链接，点击「解析」

示例:
```
https://www.bilibili.com/video/BV1xx411c7XD
```

### 2. 等待处理

系统会自动：
- 下载视频
- 语音转文字
- 生成摘要
- 同步到向量库

### 3. 查看视频

在左侧「历史记录」中点击已处理的视频

### 4. AI 对话 ⭐

点击顶部「AI 对话」按钮，提问：
- "这个视频讲了什么？"
- "有哪些视频提到了人工智能？"
- "视频中的主要观点是什么？"

AI 会从所有视频中检索相关内容并回答。

### 5. 查看摘要

点击「分句总结」查看详细的时间轴和段落摘要。

## ⚙️ 配置信息

### 数据库配置
```
主机: 117.72.164.82
端口: 5433
数据库: hearsight
用户: admin
```

### API 配置 (需要配置)
```bash
# 编辑 .env 文件
OPENAI_API_KEY=你的API密钥
OPENAI_BASE_URL=https://api.siliconflow.cn/v1
OPENAI_CHAT_MODEL=deepseek-ai/DeepSeek-V3
```

**⚠️ 重要**: 目前 `OPENAI_API_KEY` 为空，需要配置才能使用：
- AI 摘要生成功能
- AI 对话功能

**获取免费 API Key**: https://cloud.siliconflow.cn/

## 🔧 管理命令

### 停止服务
```bash
# 在终端按 Ctrl+C 停止相应服务
```

### 重启后端
```bash
cd HearSight
python main.py
```

### 重启前端
```bash
cd HearSight/frontend
npm run dev
```

### 查看日志
后端和前端的日志会实时输出到终端。

## 📁 数据存储

### 视频文件
```
HearSight/app_datas/download_videos/
```

### 向量库
```
HearSight/vector_db/
```

### 数据库
PostgreSQL 数据库 (远程服务器)

## 🚀 高级功能

### 同步向量库

如果需要手动同步数据到向量库：

```bash
# 同步所有数据
curl -X POST http://localhost:9999/api/knowledge/sync \
  -H "Content-Type: application/json" \
  -d '{}'

# 同步单个视频
curl -X POST http://localhost:9999/api/knowledge/sync \
  -H "Content-Type: application/json" \
  -d '{"transcript_id": 1}'
```

### 查看向量库中的视频

```bash
curl http://localhost:9999/api/knowledge/videos
```

## ❓ 常见问题

### Q: AI 对话无法使用？
A: 需要配置 `OPENAI_API_KEY` 在 `.env` 文件中。

### Q: 视频下载失败？
A: 检查网络连接，或者配置 Bilibili SESSDATA（会员视频需要）。

### Q: 向量库搜索无结果？
A: 确保已处理过视频，并且视频已生成摘要。

### Q: 数据库连接失败？
A: 检查数据库服务器是否在线，防火墙是否开放 5433 端口。

## 📊 系统要求

- Python 3.10+
- Node.js 16+
- PostgreSQL 12+
- 8GB+ RAM (推荐)
- GPU (可选，加速语音识别)

## 📞 技术支持

如遇问题，请检查：
1. 后端日志输出
2. 前端浏览器控制台
3. 数据库连接状态
4. API Key 配置

---

**🎊 HearSight 已成功启动并运行！**

现在可以开始使用 AI 驱动的视频分析功能了！
